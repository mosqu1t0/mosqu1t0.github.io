<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL &amp; MYSQL | logNCat</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.209c7d81.css" as="style"><link rel="preload" href="/assets/js/app.2b82a5e0.js" as="script"><link rel="preload" href="/assets/js/2.f4616c2c.js" as="script"><link rel="preload" href="/assets/js/19.fa086e74.js" as="script"><link rel="prefetch" href="/assets/js/10.d41298bf.js"><link rel="prefetch" href="/assets/js/11.5d3b5ee2.js"><link rel="prefetch" href="/assets/js/12.3d6859bb.js"><link rel="prefetch" href="/assets/js/13.d145c252.js"><link rel="prefetch" href="/assets/js/14.9bdc9be7.js"><link rel="prefetch" href="/assets/js/15.50fbe31f.js"><link rel="prefetch" href="/assets/js/16.17da369e.js"><link rel="prefetch" href="/assets/js/17.3a27af42.js"><link rel="prefetch" href="/assets/js/18.e8053149.js"><link rel="prefetch" href="/assets/js/20.d7be3382.js"><link rel="prefetch" href="/assets/js/21.4a6c71cd.js"><link rel="prefetch" href="/assets/js/22.fee4403a.js"><link rel="prefetch" href="/assets/js/23.e1618142.js"><link rel="prefetch" href="/assets/js/24.03c56867.js"><link rel="prefetch" href="/assets/js/25.3f02f5c7.js"><link rel="prefetch" href="/assets/js/26.725a4efd.js"><link rel="prefetch" href="/assets/js/27.0616430f.js"><link rel="prefetch" href="/assets/js/28.be231fe1.js"><link rel="prefetch" href="/assets/js/29.e527f665.js"><link rel="prefetch" href="/assets/js/3.fa68edb2.js"><link rel="prefetch" href="/assets/js/30.d1e417c2.js"><link rel="prefetch" href="/assets/js/31.9662ad3f.js"><link rel="prefetch" href="/assets/js/32.ad1d4a30.js"><link rel="prefetch" href="/assets/js/33.5f539bb4.js"><link rel="prefetch" href="/assets/js/34.c81733a0.js"><link rel="prefetch" href="/assets/js/35.9985b8a4.js"><link rel="prefetch" href="/assets/js/36.a60c2bde.js"><link rel="prefetch" href="/assets/js/37.4eab787f.js"><link rel="prefetch" href="/assets/js/38.93418f57.js"><link rel="prefetch" href="/assets/js/39.95c35312.js"><link rel="prefetch" href="/assets/js/4.8f8d9e03.js"><link rel="prefetch" href="/assets/js/40.b5d01ecc.js"><link rel="prefetch" href="/assets/js/41.db12a717.js"><link rel="prefetch" href="/assets/js/42.f9fc1fb8.js"><link rel="prefetch" href="/assets/js/43.fc65dae4.js"><link rel="prefetch" href="/assets/js/44.2e0cac19.js"><link rel="prefetch" href="/assets/js/45.1003bf5e.js"><link rel="prefetch" href="/assets/js/46.ada634dc.js"><link rel="prefetch" href="/assets/js/47.871d9262.js"><link rel="prefetch" href="/assets/js/5.eefe5d85.js"><link rel="prefetch" href="/assets/js/6.e6d51f2f.js"><link rel="prefetch" href="/assets/js/7.4cc231d3.js"><link rel="prefetch" href="/assets/js/8.f98b7ddf.js"><link rel="prefetch" href="/assets/js/9.b7bbc3bf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.209c7d81.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">logNCat</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><a href="/language/" class="link-title">语言</a> <span class="title" style="display:none;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/c&amp;cpp/" class="nav-link">C&amp;Cpp</a></li><li class="dropdown-item"><!----> <a href="/language/bash/" class="nav-link">Bash</a></li><li class="dropdown-item"><!----> <a href="/language/Vimscript/" class="nav-link">Vimscript</a></li><li class="dropdown-item"><!----> <a href="/language/html/" class="nav-link">Html</a></li><li class="dropdown-item"><!----> <a href="/language/css/" class="nav-link">Css</a></li><li class="dropdown-item"><!----> <a href="/language/Javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/language/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/language/go/" class="nav-link">Go</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/database/" class="nav-link">数据库</a></div><div class="nav-item"><a href="/note/" class="nav-link">Note</a></div><div class="nav-item"><a href="/linux/" class="nav-link">Linux</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="mosqu1t0" class="dropdown-title"><!----> <span class="title" style="display:;">mosqu1t0</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mosqu1t0" target="_blank" rel="noopener noreferrer" class="nav-link external">
  My Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/poem.html" class="nav-link">Poem</a></li></ul></div></div> <a href="https://github.com/mosqu1t0/mosqu1t0.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><a href="/language/" class="link-title">语言</a> <span class="title" style="display:none;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/c&amp;cpp/" class="nav-link">C&amp;Cpp</a></li><li class="dropdown-item"><!----> <a href="/language/bash/" class="nav-link">Bash</a></li><li class="dropdown-item"><!----> <a href="/language/Vimscript/" class="nav-link">Vimscript</a></li><li class="dropdown-item"><!----> <a href="/language/html/" class="nav-link">Html</a></li><li class="dropdown-item"><!----> <a href="/language/css/" class="nav-link">Css</a></li><li class="dropdown-item"><!----> <a href="/language/Javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/language/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/language/go/" class="nav-link">Go</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/database/" class="nav-link">数据库</a></div><div class="nav-item"><a href="/note/" class="nav-link">Note</a></div><div class="nav-item"><a href="/linux/" class="nav-link">Linux</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="mosqu1t0" class="dropdown-title"><!----> <span class="title" style="display:;">mosqu1t0</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mosqu1t0" target="_blank" rel="noopener noreferrer" class="nav-link external">
  My Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/poem.html" class="nav-link">Poem</a></li></ul></div></div> <a href="https://github.com/mosqu1t0/mosqu1t0.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Database</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/76c729/" class="sidebar-link">DATABASE</a></li><li><a href="/pages/e64e0f/" aria-current="page" class="active sidebar-link">SQL &amp; MYSQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#sql的基本书写规则" class="sidebar-link">SQL的基本书写规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#命名规则" class="sidebar-link">命名规则</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#sql语句" class="sidebar-link">SQl语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#ddl-data-definition-language-数据定义语言" class="sidebar-link">DDL (Data Definition Language, 数据定义语言)</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#dml-data-manipulation-language-数据操控语言" class="sidebar-link">DML (Data Manipulation Language, 数据操控语言)</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#dcl-data-control-language-数据控制语言" class="sidebar-link">DCL(Data Control Language, 数据控制语言)</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#ddl" class="sidebar-link">DDL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#数据库" class="sidebar-link">数据库</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#查询" class="sidebar-link">查询</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#创建" class="sidebar-link">创建</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#删除" class="sidebar-link">删除</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#表" class="sidebar-link">表</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#查询-2" class="sidebar-link">查询</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#创建字段" class="sidebar-link">创建字段</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#字段类型" class="sidebar-link">字段类型</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#删除表" class="sidebar-link">删除表</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#更新表" class="sidebar-link">更新表</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#更改表名" class="sidebar-link">更改表名</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#dml" class="sidebar-link">DML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#表-2" class="sidebar-link">表</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#添加数据" class="sidebar-link">添加数据</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#修改数据" class="sidebar-link">修改数据</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#删除数据" class="sidebar-link">删除数据</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#dql" class="sidebar-link">DQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#数据查询" class="sidebar-link">数据查询</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#基本查询" class="sidebar-link">基本查询</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#条件查询" class="sidebar-link">条件查询</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#分组查询" class="sidebar-link">分组查询</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#排序查询" class="sidebar-link">排序查询</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#分页查询" class="sidebar-link">分页查询</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#dql执行顺序" class="sidebar-link">DQL执行顺序</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#dcl" class="sidebar-link">DCL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#用户管理" class="sidebar-link">用户管理</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#权限管理" class="sidebar-link">权限管理</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#函数-2" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#字符串函数" class="sidebar-link">字符串函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#数值函数" class="sidebar-link">数值函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#日期函数" class="sidebar-link">日期函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#流程函数" class="sidebar-link">流程函数</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#约束" class="sidebar-link">约束</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#外键约束" class="sidebar-link">外键约束</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#多表查询" class="sidebar-link">多表查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#多表关系" class="sidebar-link">多表关系</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#一对多" class="sidebar-link">一对多</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#多对多" class="sidebar-link">多对多</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#一对一" class="sidebar-link">一对一</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#分类" class="sidebar-link">分类</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#内连接" class="sidebar-link">内连接</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#外连接" class="sidebar-link">外连接</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#自连接" class="sidebar-link">自连接</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#联合查询" class="sidebar-link">联合查询</a></li><li class="sidebar-sub-header level4"><a href="/pages/e64e0f/#子查询" class="sidebar-link">子查询</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#事务" class="sidebar-link">事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#特性" class="sidebar-link">特性</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#操作" class="sidebar-link">操作</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#并发事务问题" class="sidebar-link">并发事务问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/e64e0f/#事务隔离级别" class="sidebar-link">事务隔离级别</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e64e0f/#退出和关闭" class="sidebar-link">退出和关闭</a></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/categories/?category=database" title="分类" data-v-1baff76c>database</a></li></ul> <div class="info" data-v-1baff76c><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2022-05-26</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">SQL &amp; MYSQL<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="sql-mysql"><a href="#sql-mysql" class="header-anchor">#</a> SQL &amp; MYSQL</h1> <table><thead><tr><th>名称</th> <th>描述</th> <th>简称</th></tr></thead> <tbody><tr><td>数据库</td> <td>储存数据的仓库, 数据是有组织的进行存储</td> <td>DataBase(DB)</td></tr> <tr><td>数据库管理系统</td> <td>操作和管理数据库的大型软件</td> <td>DataBase Management System(DBMS)</td></tr> <tr><td>SQL</td> <td>操作关系型数据库的编程语言，定义了一套操作关系型数据库统一标准</td> <td>Structured Query Language(SQL)</td></tr></tbody></table> <blockquote><p>即：数据库存放数据信息，数据库管理系统(Oracle, mysql等)用于管理数据库，而程序员通过sql语言与DBMS的协助，控制数据库</p></blockquote> <h2 id="sql的基本书写规则"><a href="#sql的基本书写规则" class="header-anchor">#</a> SQL的基本书写规则</h2> <ul><li>SQL 语句以分号<code>;</code>结尾</li> <li>关键字不区分大小写</li> <li>字符串和日期常数需要使用单引号<code>'</code>扩起来</li> <li>数字常数无需要加单引号(直接书写数字即可)</li> <li>单词之间需要使用半角空格或者换行符进行分隔</li> <li>注释:
<ul><li>单行注释: <code>-- 注释内容 或 #注释内容(Mysql特有)</code></li> <li>多行注释: <code>/*注释内容*/</code></li></ul></li></ul> <p>例:
创建数据库</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> DATEBASE shop<span class="token punctuation">;</span>
</code></pre></div><h3 id="命名规则"><a href="#命名规则" class="header-anchor">#</a> 命名规则</h3> <p>数据库名称、表名和列名等可以使用以下三种字符</p> <ul><li>半角英文字母</li> <li>半角数字</li> <li>下划线</li></ul> <blockquote><p>名称必须以半角英文字母作为开头, 不能重复</p></blockquote> <h2 id="sql语句"><a href="#sql语句" class="header-anchor">#</a> SQl语句</h2> <h3 id="ddl-data-definition-language-数据定义语言"><a href="#ddl-data-definition-language-数据定义语言" class="header-anchor">#</a> DDL (Data Definition Language, 数据定义语言)</h3> <p>  用来创建或者删除存储数据用的数据库以及数据库中的表 等对象。</p> <ul><li>CREAT：创建数据库和表对象</li> <li>DROP：删除数据库和表等对象</li> <li>ALTER：修改数据库和表等对象的结构</li></ul> <h3 id="dml-data-manipulation-language-数据操控语言"><a href="#dml-data-manipulation-language-数据操控语言" class="header-anchor">#</a> DML (Data Manipulation Language, 数据操控语言)</h3> <p>  用来查询或者变更表中的记录, 完成数的增删改</p> <ul><li>SELECT：查询表中的数据</li> <li>INSERT：向表中插入新数据</li> <li>UPDATE：更新表中的数据</li> <li>DELETE：删除表中的数据</li></ul> <h3 id="dcl-data-control-language-数据控制语言"><a href="#dcl-data-control-language-数据控制语言" class="header-anchor">#</a> DCL(Data Control Language, 数据控制语言)</h3> <p>  用来确认或取消对数据库中的数据进行的变更</p> <ul><li>COMMIT：确认对数据库中的数据进行的变更</li> <li>ROLLBACK：取消对数据库中的数据进行的变更</li> <li>GRANT：赋予用户操作权限</li> <li>REBOKE：取消用户的操作权限</li></ul> <h2 id="ddl"><a href="#ddl" class="header-anchor">#</a> DDL</h2> <h3 id="数据库"><a href="#数据库" class="header-anchor">#</a> 数据库</h3> <h4 id="查询"><a href="#查询" class="header-anchor">#</a> 查询</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询所有数据库</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span>

<span class="token comment">-- 查询当前数据库</span>
<span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="创建"><a href="#创建" class="header-anchor">#</a> 创建</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">]</span> name <span class="token punctuation">[</span><span class="token keyword">default</span> <span class="token keyword">charset</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">collate</span> 排列规则<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>可以使用<code>create database test default charset utf8mb4</code>创建一个支持utf-8编码的数据库，因为中文字符中</p></blockquote> <h4 id="删除"><a href="#删除" class="header-anchor">#</a> 删除</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token keyword">exists</span><span class="token punctuation">]</span> name<span class="token punctuation">;</span>
</code></pre></div><h4 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">use</span> name<span class="token punctuation">;</span>
</code></pre></div><h3 id="表"><a href="#表" class="header-anchor">#</a> 表</h3> <h4 id="查询-2"><a href="#查询-2" class="header-anchor">#</a> 查询</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询当前数据库所有表</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>


<span class="token comment">-- 查询表结构</span>
<span class="token keyword">desc</span> name<span class="token punctuation">;</span>


<span class="token comment">-- 查询指定表的建表语句</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> name<span class="token punctuation">;</span>
</code></pre></div><h4 id="创建字段"><a href="#创建字段" class="header-anchor">#</a> 创建字段</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> name <span class="token punctuation">(</span>
字段<span class="token number">1</span>  字段类型 <span class="token punctuation">[</span><span class="token keyword">comment</span> 字段注解<span class="token punctuation">]</span><span class="token punctuation">,</span>
字段<span class="token number">2</span>  字段类型 <span class="token punctuation">[</span><span class="token keyword">comment</span> 字段注解<span class="token punctuation">]</span><span class="token punctuation">,</span>
字段<span class="token number">3</span>  字段类型 <span class="token punctuation">[</span><span class="token keyword">comment</span> 字段注解<span class="token punctuation">]</span><span class="token punctuation">,</span>
字段<span class="token number">4</span>  字段类型 <span class="token punctuation">[</span><span class="token keyword">comment</span> 字段注解<span class="token punctuation">]</span> 
<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token keyword">comment</span> 表注解<span class="token punctuation">]</span>
</code></pre></div><h4 id="字段类型"><a href="#字段类型" class="header-anchor">#</a> 字段类型</h4> <p><strong>数字:</strong></p> <table><thead><tr><th>类型</th> <th>大小</th></tr></thead> <tbody><tr><td>整形</td> <td></td></tr> <tr><td>tinyint</td> <td>1 byte</td></tr> <tr><td>smallint</td> <td>2 byte</td></tr> <tr><td>mediumint</td> <td>3 byte</td></tr> <tr><td>int or integer</td> <td>4 byte</td></tr> <tr><td>bigint</td> <td>8 byte</td></tr> <tr><td>浮点数</td> <td></td></tr> <tr><td>float</td> <td>4 byte</td></tr> <tr><td>double</td> <td>8 byte</td></tr> <tr><td>decimal</td> <td></td></tr></tbody></table> <blockquote><p>其中decimal的范围依赖于M(精度)和D(标度)的值<br>
标示double 和 decimal的精度需要额外的两个参数, 例如我要表示3位整数1位小数<code>double(4, 1)</code><br>
可以使用unsigned来标识该变量没有负取值</p></blockquote> <br> <p><strong>字符:</strong></p> <table><thead><tr><th>类型</th> <th>大小</th> <th>描述</th></tr></thead> <tbody><tr><td>char</td> <td>0-255 Byte</td> <td>定长字符串</td></tr> <tr><td>varchar</td> <td>0-65535 Byte</td> <td>变长字符串</td></tr> <tr><td>tinytext</td> <td>0-255 Byte</td> <td>短文本字符串</td></tr> <tr><td>blob</td> <td>0-65535 Byte</td> <td>二进制形式的长文本数据</td></tr> <tr><td>text</td> <td>0-65535 Byte</td> <td>长文本数据</td></tr> <tr><td>mediumblob</td> <td>0-16777215 Byte</td> <td>二进制形式的中等长度文本数据</td></tr> <tr><td>mediumtext</td> <td>0-16777215 Byte</td> <td>中等长度文本数据</td></tr> <tr><td>longblob</td> <td>0-4294967295 Byte</td> <td>二进制形式的极大文本数据</td></tr> <tr><td>longtext</td> <td>0-4294967295 Byte</td> <td>极大文本数据</td></tr></tbody></table> <blockquote><p>char(n) 写死一个字段就是n个字节, varchar(n) 最大字节是n个字节,若少于n个字节则使用更少内存, 但是 char 性能 高于 varchar</p></blockquote> <h4 id="删除表"><a href="#删除表" class="header-anchor">#</a> 删除表</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="更新表"><a href="#更新表" class="header-anchor">#</a> 更新表</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span> <span class="token keyword">ADD</span><span class="token operator">/</span><span class="token keyword">MODIFY</span><span class="token operator">/</span>CHANGE<span class="token operator">/</span><span class="token keyword">DROP</span><span class="token operator">/</span><span class="token keyword">RENAME</span> <span class="token keyword">TO</span> <span class="token keyword">COLUMN</span> <span class="token operator">&lt;</span>列的定义<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>命令：<code>alter table testdata.what add column y_num int(10);</code>column可以省略<br>
表示在testdata.what表的最后插入一列 y_num</p> <p>MODIFY 只能修改字段类型<br>
CHANGE 可以修改的字段名,类型等<br>
DROP 删除字段<br>
RENAME TO 更改字段名字</p> <h4 id="更改表名"><a href="#更改表名" class="header-anchor">#</a> 更改表名</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">RENAME</span> <span class="token keyword">TABLE</span> testdata<span class="token punctuation">.</span>what <span class="token keyword">to</span> testdata<span class="token punctuation">.</span><span class="token keyword">some</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="dml"><a href="#dml" class="header-anchor">#</a> DML</h2> <h3 id="表-2"><a href="#表-2" class="header-anchor">#</a> 表</h3> <h4 id="添加数据"><a href="#添加数据" class="header-anchor">#</a> 添加数据</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 给指定字段添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>字段<span class="token number">1</span><span class="token punctuation">,</span> 字段<span class="token number">2</span><span class="token punctuation">,</span> 字段<span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 给全部字段添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">,</span> 值<span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 批量添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>字段名<span class="token number">1</span><span class="token punctuation">,</span> 字段名<span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="修改数据"><a href="#修改数据" class="header-anchor">#</a> 修改数据</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> 表名 <span class="token keyword">set</span> 字段名<span class="token operator">=</span>值<span class="token number">1</span><span class="token punctuation">,</span> 字段名<span class="token number">2</span><span class="token operator">=</span>值<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="删除数据"><a href="#删除数据" class="header-anchor">#</a> 删除数据</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token punctuation">[</span><span class="token keyword">where</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="dql"><a href="#dql" class="header-anchor">#</a> DQL</h2> <h3 id="数据查询"><a href="#数据查询" class="header-anchor">#</a> 数据查询</h3> <p>查询关键字：select</p> <p><strong>语法：</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span>
    字段列表
<span class="token keyword">from</span>
    表名列表
<span class="token keyword">where</span>
    条件列表
<span class="token keyword">group</span> <span class="token keyword">by</span>
    分组字段列表
<span class="token keyword">having</span>
    分组后条件列表
<span class="token keyword">order</span> <span class="token keyword">by</span>
    排序字段列表
<span class="token keyword">limit</span>
    分页参数
</code></pre></div><h4 id="基本查询"><a href="#基本查询" class="header-anchor">#</a> 基本查询</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#查询多个字段</span>
<span class="token keyword">select</span> 字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">,</span>字段<span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>

<span class="token comment">#设置别名</span>
<span class="token keyword">select</span> 字段<span class="token number">1</span><span class="token punctuation">[</span><span class="token keyword">as</span> 别名<span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">[</span><span class="token keyword">as</span> 别名<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>

<span class="token comment"># 去除重复查询记录</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> 字段列表 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
</code></pre></div><h4 id="条件查询"><a href="#条件查询" class="header-anchor">#</a> 条件查询</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 条件列表
</code></pre></div><p><strong>条件：</strong></p> <table><thead><tr><th>比较运算符</th> <th>描述</th></tr></thead> <tbody><tr><td>&gt;</td> <td>大于</td></tr> <tr><td>&gt;=</td> <td>大于等于</td></tr> <tr><td>&lt;</td> <td>小于</td></tr> <tr><td>&lt;=</td> <td>小于等于</td></tr> <tr><td>=</td> <td>等于</td></tr> <tr><td>&lt;&gt;</td> <td>!=</td></tr> <tr><td>between...and...</td> <td>在某个范围之内(含最小、最大值)</td></tr> <tr><td>in(...)</td> <td>在in之后的列表中的值，多选一</td></tr> <tr><td>like 占位符</td> <td>模糊匹配(<code>_</code>匹配单个字符，<code>%</code> 匹配任意个字符)</td></tr> <tr><td>is NULL</td> <td>是NULL</td></tr></tbody></table> <table><thead><tr><th>逻辑运算符</th> <th>描述</th></tr></thead> <tbody><tr><td>AND 或 <code>&amp;&amp;</code></td> <td>并且</td></tr> <tr><td>OR 或 <code>||</code></td> <td>或</td></tr> <tr><td>NOT 或 <code>!</code></td> <td>非，不是</td></tr></tbody></table> <h4 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h4> <h5 id="汇总"><a href="#汇总" class="header-anchor">#</a> 汇总</h5> <table><thead><tr><th>函数</th> <th>说明</th></tr></thead> <tbody><tr><td>AVG()</td> <td>返回某列的平均值</td></tr> <tr><td>COUNT()</td> <td>返回某列的行数</td></tr> <tr><td>MAX()</td> <td>返回某列的最大值</td></tr> <tr><td>MIN()</td> <td>返回某列的最小值</td></tr> <tr><td>SUM()</td> <td>返回某列值之和</td></tr></tbody></table> <blockquote><p>AVG() 会忽略NULL行</p></blockquote> <p>可以使用distinct可以汇总不同的值</p> <p>例:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> age<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre></div><h5 id="文本处理"><a href="#文本处理" class="header-anchor">#</a> 文本处理</h5> <table><thead><tr><th>函数</th> <th>说明</th></tr></thead> <tbody><tr><td>LEFT()</td> <td>左边的字符</td></tr> <tr><td>RIGHT()</td> <td>右边的字符</td></tr> <tr><td>LOWER()</td> <td>转换为小写字符</td></tr> <tr><td>UPPER()</td> <td>转换为大写字符</td></tr> <tr><td>LTRIM()</td> <td>去除左边的空格</td></tr> <tr><td>RTRIM()</td> <td>去除右边的空格</td></tr> <tr><td>LENGTH()</td> <td>长度</td></tr> <tr><td>SOUNDEX()</td> <td>转换为语音值</td></tr></tbody></table> <p>其中，SOUNDEX()可以将一个字符串转换为描述其语音表示的字母数字模式</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> mytable
<span class="token keyword">where</span> soundex<span class="token punctuation">(</span>col1<span class="token punctuation">)</span> <span class="token operator">=</span> soundex<span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="分组查询"><a href="#分组查询" class="header-anchor">#</a> 分组查询</h4> <p>语法:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名 <span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span>
<span class="token keyword">group</span> <span class="token keyword">by</span> 分组字段名 <span class="token punctuation">[</span><span class="token keyword">having</span> 分组后过滤条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>where 与 having 区别:</p> <ol><li>执行时机不同: where 是分组之前进行过滤，不满足 where 条件，不参与分组；而having是分组之后对结果进行过滤。</li> <li>判断条件不同: where不能对聚合函数进行判断，而having可以</li></ol></blockquote> <blockquote><p>注意:</p> <ul><li>执行顺序：where &gt; 聚合函数 &gt; having</li> <li>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义</li></ul></blockquote> <p>例:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> gender<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> gender<span class="token punctuation">;</span>
</code></pre></div><h4 id="排序查询"><a href="#排序查询" class="header-anchor">#</a> 排序查询</h4> <p>语法:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名 <span class="token keyword">order</span> <span class="token keyword">by</span> 字段<span class="token number">1</span> 排序方式<span class="token number">1</span><span class="token punctuation">,</span> 字段２<span class="token punctuation">,</span> 排序方式<span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><p>排列方式:</p> <ul><li>ASC: 升序</li> <li>DESC: 升序</li></ul> <blockquote><p>注意：如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序。</p></blockquote> <p>例:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> age<span class="token punctuation">;</span>
</code></pre></div><h4 id="分页查询"><a href="#分页查询" class="header-anchor">#</a> 分页查询</h4> <p>语法:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名 <span class="token keyword">limit</span> 起始索引<span class="token punctuation">,</span> 查询记录数<span class="token punctuation">;</span>

</code></pre></div><blockquote><ul><li>起始索引从0开始，起始索引=(查询页码-1) * 每页显示记录数</li> <li>分页查询住不同数据库有不同的实现，mysql中是LIMIT</li> <li>如果查询的是第一页数据，起始索引可以省略，直接简写成limit10</li></ul></blockquote> <h3 id="dql执行顺序"><a href="#dql执行顺序" class="header-anchor">#</a> DQL执行顺序</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">from</span>
    表名列表
<span class="token keyword">where</span>
    条件列表
<span class="token keyword">group</span> <span class="token keyword">by</span>
    分组字段控制
<span class="token keyword">having</span>  
    分组后后条件判断
<span class="token keyword">select</span>
    字段列表
<span class="token keyword">order</span> <span class="token keyword">by</span>
    排列字段列表
<span class="token keyword">limit</span> 
    分页参数

</code></pre></div><h2 id="dcl"><a href="#dcl" class="header-anchor">#</a> DCL</h2> <p>用来管理数据库用户，控制数据库的访问权限</p> <h3 id="用户管理"><a href="#用户管理" class="header-anchor">#</a> 用户管理</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#查询用户</span>
<span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span>

<span class="token comment">#创建用户</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">'用户'</span><span class="token variable">@'主机名'</span> identified <span class="token keyword">by</span> <span class="token string">'密码'</span><span class="token punctuation">;</span>

<span class="token comment">#修改用户密码</span>
<span class="token keyword">alter</span> <span class="token keyword">user</span> <span class="token string">'用户名'</span><span class="token variable">@'主机名'</span> indentified <span class="token keyword">with</span> mysql_native_password <span class="token keyword">by</span> <span class="token string">'新密码'</span><span class="token punctuation">;</span>

<span class="token comment"># 删除密码</span>
<span class="token keyword">drop</span> <span class="token keyword">user</span> <span class="token string">'用户名'</span><span class="token variable">@'主机名'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="权限管理"><a href="#权限管理" class="header-anchor">#</a> 权限管理</h3> <table><thead><tr><th>权限</th> <th>说明</th></tr></thead> <tbody><tr><td>all, all privileges</td> <td>所有权限</td></tr> <tr><td>select</td> <td>查询权限</td></tr> <tr><td>insert</td> <td>插入数据</td></tr> <tr><td>update</td> <td>修改数据</td></tr> <tr><td>delete</td> <td>删除数据</td></tr> <tr><td>alter</td> <td>修改表</td></tr> <tr><td>drop</td> <td>删除数据库/表视图</td></tr> <tr><td>create</td> <td>创建数据库/表</td></tr></tbody></table> <p><strong>命令：</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#查询权限</span>
<span class="token keyword">show</span> grants <span class="token keyword">for</span> <span class="token string">'用户'</span><span class="token variable">@'主机名'</span>

<span class="token comment">#授予权限</span>
<span class="token keyword">grant</span> 权限列表 <span class="token keyword">on</span> 数据库名 <span class="token keyword">to</span> <span class="token string">'用户名'</span><span class="token variable">@'主机名'</span>

<span class="token comment">#撤销权限</span>
<span class="token keyword">revoke</span> 权限列表 <span class="token keyword">on</span> 数据库名<span class="token punctuation">.</span>表名 <span class="token keyword">from</span> <span class="token string">'用户名'</span><span class="token variable">@'主机名'</span> 
</code></pre></div><h2 id="函数-2"><a href="#函数-2" class="header-anchor">#</a> 函数</h2> <h3 id="字符串函数"><a href="#字符串函数" class="header-anchor">#</a> 字符串函数</h3> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>concat(s1, s2,..., s3)</td> <td>字符串拼接</td></tr> <tr><td>lower(str)</td> <td>将字符串str全部转为小写</td></tr> <tr><td>upper(str)</td> <td>将字符串str全部转换为大写</td></tr> <tr><td>lpad(str, n, pad)</td> <td>左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</td></tr> <tr><td>rpad(str, n, pad)</td> <td>右填充，用字符串pad对str右边进行填充，达到n个字符串长度</td></tr> <tr><td>trim(str)</td> <td>去掉字符串头部和尾部的空格</td></tr> <tr><td>substring(str, start, len)</td> <td>返回从字符串str从start位置引起的len个长度的字符串</td></tr></tbody></table> <h3 id="数值函数"><a href="#数值函数" class="header-anchor">#</a> 数值函数</h3> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>ceil()</td> <td>向上取整</td></tr> <tr><td>floor()</td> <td>向下取整</td></tr> <tr><td>mod(x, y)</td> <td>返回x/y的模</td></tr> <tr><td>rand()</td> <td>返回0～1内的随机数</td></tr> <tr><td>round(x, y)</td> <td>求参数x的四舍五入的值，保留ｙ位小数</td></tr></tbody></table> <h3 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h3> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>curdate()</td> <td>返回当前日期</td></tr> <tr><td>curtime()</td> <td>返回当前时间</td></tr> <tr><td>now()</td> <td>返回当前日期和时间</td></tr> <tr><td>year()</td> <td>获取指date的年份</td></tr> <tr><td>month()</td> <td>获取指定date的月份</td></tr> <tr><td>day()</td> <td>获取指定date的日期</td></tr> <tr><td>date_add(date, interval expr type)</td> <td>返回一个日期/时间值加上一个时间间隔expr后的时间值</td></tr> <tr><td>datediff(date1, date2)</td> <td>返回起始时间date1 和 结束时间date2之间的天数</td></tr></tbody></table> <h3 id="流程函数"><a href="#流程函数" class="header-anchor">#</a> 流程函数</h3> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>if(value, t, f)</td> <td>如果value为true, 则返回t, 否则返回f</td></tr> <tr><td>ifnull(value1, value2)</td> <td>如果value1不为空, 返回value1, 否则返回value2</td></tr> <tr><td>case when [val1] then [res1] ... else [default] end</td> <td>如果val1为true，返回res1, ... 否则返回default默认值</td></tr> <tr><td>case [expr] when [val1] then [res1] ... else [default] end</td> <td>如果expr的值等于val1, 返回res1, ... 否则返回default默认值</td></tr></tbody></table> <h2 id="约束"><a href="#约束" class="header-anchor">#</a> 约束</h2> <ol><li><p>非空约束: not null</p> <ul><li>约束某字段不能为空</li></ul></li> <li><p>唯一约束: unique</p> <ul><li>约束字段值是唯一的</li></ul></li> <li><p>主键约束: primary key (自增: auto_increment)</p> <ul><li>主键是一张表的唯一表示，是非空唯一的，若需要自增，加上auto_increment</li></ul></li> <li><p>默认约束: default</p> <ul><li>若某字段的值没有添加，则会默认指定的值</li></ul></li> <li><p>检查约束: check</p> <ul><li>字段储存时必须要达到的条件</li></ul></li> <li><p>外键约束: foreign key</p> <ul><li>用来让两张表的数据之间建立连接，从而保证数据的完整性和一致性的</li></ul></li></ol> <p><strong>例:</strong></p> <table><thead><tr><th>字段名</th> <th>字段含义</th> <th>字段类型</th> <th>约束条件</th> <th>约束关键字</th></tr></thead> <tbody><tr><td>id</td> <td>id唯一标示</td> <td>int</td> <td>主键并且自动增长</td> <td>primary key, auto_increment</td></tr> <tr><td>name</td> <td>姓名</td> <td>varchar(10)</td> <td>不为空,并且唯一</td> <td>not null, unique</td></tr> <tr><td>age</td> <td>年龄</td> <td>int</td> <td>大于0,并且小于120</td> <td>check</td></tr> <tr><td>status</td> <td>状态</td> <td>char(1)</td> <td>如果没有指定该值，默认为１</td> <td>default</td></tr> <tr><td>gender</td> <td>性别</td> <td>char(1)</td> <td>无</td> <td></td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span> <span class="token keyword">check</span><span class="token punctuation">(</span>age <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> age <span class="token operator">&lt;=</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">status</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="外键约束"><a href="#外键约束" class="header-anchor">#</a> 外键约束</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
    字段名 数据类型<span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">[</span><span class="token keyword">constraint</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>外键名称<span class="token punctuation">]</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>外键字段名<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表<span class="token punctuation">(</span>主表列名<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#添加外键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token keyword">constraint</span> 外键名称 <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>外键字段名<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表<span class="token punctuation">(</span>主表列名<span class="token punctuation">)</span>

<span class="token comment">#删除外键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> 外键名称<span class="token punctuation">;</span>

</code></pre></div><ul><li><strong>删除和更新行为</strong></li></ul> <table><thead><tr><th>行为</th> <th>说明</th></tr></thead> <tbody><tr><td>no action</td> <td>当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新。(与restrict一致)</td></tr> <tr><td>restrict</td> <td>当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新。(与no action一致)</td></tr> <tr><td>cascade</td> <td>当在父表中删除/更新对应记录时，首先检查该记录是否对应外键，如果有，则也删除/更新外键在子表中的记录。</td></tr> <tr><td>set null</td> <td>当在父表中删除对应记录时，首先检查该记录是否对应外键，如果有则设置子表中该外键值为null(这就要求该外键允许取null)</td></tr> <tr><td>set default</td> <td>父表有变更时，子表将外键列设置成一个默认的值(innodb不支持)</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#创建外键关联时的例子</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token keyword">constraint</span> 外键名称 foreigen <span class="token keyword">key</span> <span class="token punctuation">(</span>外键字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名<span class="token punctuation">(</span>主表字段名<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">constraint</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">cascade</span>
</code></pre></div><h2 id="多表查询"><a href="#多表查询" class="header-anchor">#</a> 多表查询</h2> <h3 id="多表关系"><a href="#多表关系" class="header-anchor">#</a> 多表关系</h3> <p>项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构名，由于业务之间相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种:</p> <ul><li>一对多</li> <li>多对多</li> <li>一对一</li></ul> <h4 id="一对多"><a href="#一对多" class="header-anchor">#</a> 一对多</h4> <ul><li>案例：部门与员工的关系</li> <li>关系：一个部门对应多个员工，一个员工对应一个部门</li> <li>实现：<code>在多的一方建立外键，指向一的一方的主键</code></li></ul> <h4 id="多对多"><a href="#多对多" class="header-anchor">#</a> 多对多</h4> <ul><li>案例：学生与课程的关系</li> <li>关系：一个学生可以选修多门课程，一门课程也可以供多个学生选修</li> <li>实现：<code>建立第三张中间表，中间表值扫包含两个外键，分别关联两方主键</code></li></ul> <h4 id="一对一"><a href="#一对一" class="header-anchor">#</a> 一对一</h4> <ul><li>案例：用户与用户详情的关系</li> <li>关系：一对一关系，用于单表拆分，将一张表的基础字段放在在一张表中，其他详情字段放在另一张表中，以提升操作效率</li> <li>实现：<code>在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的( unique )</code></li></ul> <h3 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h3> <ul><li>概述：指从多张表中查询数据</li> <li>笛卡尔积：笛卡儿积指子数学中，两个集合的所有组合情况(在多表查询时，需要消除无效的笛卡尔积)</li></ul> <h3 id="分类"><a href="#分类" class="header-anchor">#</a> 分类</h3> <ul><li>查询连接
<ul><li>内连接：相当于查询A、B交集部分数据</li> <li>外连接：
<ul><li>左外连接：查询左表所有数据，以及两张表交集部分数据</li> <li>右外连接：查询右表所有数据，以及两张表交集部分数据</li></ul></li> <li>自连接：当前表与自身的连接查询，自连接必须使用表别名</li></ul></li> <li>子查询</li></ul> <h4 id="内连接"><a href="#内连接" class="header-anchor">#</a> 内连接</h4> <p>查询两张表交集的部分</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#隐式内连接</span>
<span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表<span class="token number">1</span><span class="token punctuation">,</span> 表<span class="token number">2</span> <span class="token keyword">where</span> 条件<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

<span class="token comment">#显式内连接</span>
<span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表<span class="token number">1</span> <span class="token punctuation">[</span><span class="token keyword">inner</span><span class="token punctuation">]</span> <span class="token keyword">join</span> 表<span class="token number">2</span> <span class="token keyword">on</span> 条件<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="外连接"><a href="#外连接" class="header-anchor">#</a> 外连接</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 两个写法可以互换</span>
<span class="token comment">#左外连接, 相当于查询左表(表1)的所有数据，包含交集部分</span>
<span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表<span class="token number">1</span> <span class="token keyword">left</span> <span class="token punctuation">[</span><span class="token keyword">outer</span><span class="token punctuation">]</span> <span class="token keyword">join</span> 表<span class="token number">2</span> <span class="token keyword">on</span> 条件<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

<span class="token comment">#右外连接, 相当于查询右表(表2)的所有数据，包含交集部分</span>
<span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表<span class="token number">1</span> <span class="token keyword">right</span> <span class="token punctuation">[</span><span class="token keyword">outer</span><span class="token punctuation">]</span> <span class="token keyword">join</span> 表<span class="token number">2</span> <span class="token keyword">on</span> 条件<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="自连接"><a href="#自连接" class="header-anchor">#</a> 自连接</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表框 <span class="token keyword">from</span> 表A 别名A <span class="token keyword">join</span> 表A 别名B <span class="token keyword">on</span> 条件<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="联合查询"><a href="#联合查询" class="header-anchor">#</a> 联合查询</h4> <p>对于union查询，就是把多次查询的结果合并起来，形成一个新的查询结果集。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表A<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

<span class="token keyword">union</span><span class="token punctuation">[</span><span class="token keyword">ALL</span><span class="token punctuation">]</span>

<span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表B<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h4> <p>sql 语句中嵌套select 语句，称为嵌套查询，又称为子查询</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> table1 <span class="token keyword">where</span> column1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> column1 <span class="token keyword">from</span> table2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><br>子查询外部的语句可以是insert / update / delete / select 的任何一个</p> <br>
根据子查询结果的不同，分为:
- 标量子查询(子查询结果为单个值)
- 列子查询(查询结果为一列)
- 行子查询(查询结果为一行)
- 表子查询(查询结果为多行多列)
<h5 id="标量子查询"><a href="#标量子查询" class="header-anchor">#</a> 标量子查询</h5> <p>子查询返回的结果是单个值(数字、字符串、日期等), 最简单的形式，这种子查询成为标量子查询</p> <p>常用的操作符：<code>= , &lt;&gt; , &gt; , &gt;= , &lt; , &lt;=</code></p> <h5 id="列子查询"><a href="#列子查询" class="header-anchor">#</a> 列子查询</h5> <p>子查询返回的结果是一列(可以是多行)，这种子查询称为列子查询</p> <p>常见的操作符：<code>in , not in , any , some , all</code></p> <table><thead><tr><th>操作符</th> <th>描述</th></tr></thead> <tbody><tr><td>in</td> <td>在指定的集合范围之内，多选一</td></tr> <tr><td>not in</td> <td>不在指定的集合范围之内</td></tr> <tr><td>any</td> <td>子查询返回列表中，有任意一个满足即可</td></tr> <tr><td>some</td> <td>与any等同，使用some的地方都可以使用any</td></tr> <tr><td>all</td> <td>子查询返回列表的所有值都必须满足</td></tr></tbody></table> <br>
例：
<div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token keyword">some</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> emp <span class="token keyword">where</span> dept_id  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> dept <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'研发部'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><br> <h5 id="行子查询"><a href="#行子查询" class="header-anchor">#</a> 行子查询</h5> <p>返回的结果是一行(可以是多列)，这种子查询称为行子查询</p> <br>
例：
<div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> <span class="token punctuation">(</span>salary<span class="token punctuation">,</span> managerid<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary<span class="token punctuation">,</span> managerid <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'xxx'</span><span class="token punctuation">)</span>
</code></pre></div><br> <h5 id="多表查询-2"><a href="#多表查询-2" class="header-anchor">#</a> 多表查询</h5> <p>即将子查询的结果表作为表，进行进一步的查询</p> <br>
例：
<div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> <span class="token punctuation">(</span>job<span class="token punctuation">,</span> salary<span class="token punctuation">)</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> job<span class="token punctuation">,</span> salary <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'a'</span> <span class="token operator">or</span> name <span class="token operator">=</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">select</span> e<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> entrydate <span class="token operator">&gt;</span> <span class="token string">'2006-01-01'</span><span class="token punctuation">)</span> e <span class="token keyword">left</span> <span class="token keyword">join</span> dept d <span class="token keyword">on</span> e<span class="token punctuation">.</span>dept_id <span class="token operator">=</span> d<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre></div><h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <p>  事务 是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求，即这些操作要么<code>同时成功，要么同时失败。</code></p> <h3 id="特性"><a href="#特性" class="header-anchor">#</a> 特性</h3> <ul><li>原子性：事务是不可分割的最小操作单元，要么全部成功，要么全部失败</li> <li>一致性：事务完成时，必须使所有的数据都保持一致状态</li> <li>隔离性：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。</li> <li>持久性：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的。</li></ul> <h3 id="操作"><a href="#操作" class="header-anchor">#</a> 操作</h3> <ol><li>方式一</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#查看/设置事务提交方式 1 表示自动提交，0 表示手动提交</span>
<span class="token keyword">select</span> @<span class="token variable">@autocommit</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> @<span class="token variable">@autocommit</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>


<span class="token comment">#提交事务</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>


<span class="token comment">#回滚事务</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>方式二</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#开启事务</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment"># or begin</span>

<span class="token comment">#提交事务</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>


<span class="token comment">#回滚事务</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="并发事务问题"><a href="#并发事务问题" class="header-anchor">#</a> 并发事务问题</h3> <table><thead><tr><th>问题</th> <th>描述</th></tr></thead> <tbody><tr><td>脏读</td> <td>一个事务读到另外一个事务还没有提交的数据</td></tr> <tr><td>不可重复读</td> <td>一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读。</td></tr> <tr><td>幻读</td> <td>一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了一个幻影</td></tr></tbody></table> <h3 id="事务隔离级别"><a href="#事务隔离级别" class="header-anchor">#</a> 事务隔离级别</h3> <table><thead><tr><th>隔离级别</th> <th style="text-align:center;">脏读</th> <th style="text-align:center;">不可重复读</th> <th style="text-align:center;">幻读</th></tr></thead> <tbody><tr><td>Read uncommitted</td> <td style="text-align:center;">❎</td> <td style="text-align:center;">❎</td> <td style="text-align:center;">❎</td></tr> <tr><td>Read committed</td> <td style="text-align:center;">✅</td> <td style="text-align:center;">❎</td> <td style="text-align:center;">❎</td></tr> <tr><td>Repeatable Read(mysql默认)</td> <td style="text-align:center;">✅</td> <td style="text-align:center;">✅</td> <td style="text-align:center;">❎</td></tr> <tr><td>Serializable</td> <td style="text-align:center;">✅</td> <td style="text-align:center;">✅</td> <td style="text-align:center;">✅</td></tr></tbody></table> <blockquote><p>serializable 通过使所有事务串行来达到规避并发问题，即等待第一个操作同一字段的事件结束后才能操作下一个，性能会下降</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查看事务隔离级别</span>
<span class="token keyword">select</span> @<span class="token variable">@transaction_isolation</span><span class="token punctuation">;</span>

<span class="token comment"># 设置事务隔离级别</span>
<span class="token keyword">set</span> <span class="token punctuation">[</span><span class="token keyword">session</span><span class="token operator">|</span><span class="token keyword">global</span><span class="token punctuation">]</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation</span> <span class="token keyword">level</span> {<span class="token keyword">read</span> uncommited <span class="token operator">|</span> <span class="token keyword">read</span> <span class="token keyword">committed</span> <span class="token operator">|</span> <span class="token keyword">Repeatable</span> <span class="token keyword">read</span> <span class="token operator">|</span> <span class="token keyword">serializable</span>}
</code></pre></div><blockquote><p>Serialiazble 虽然安全性最高，但是性能最差。同理Read uncommitted 虽然安全性低，但是性能最高</p></blockquote> <h1 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h1> <h2 id="退出和关闭"><a href="#退出和关闭" class="header-anchor">#</a> 退出和关闭</h2> <ol><li>退出MySQL(命令行)</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>quit<span class="token punctuation">;</span>
<span class="token keyword">exit</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>关闭Mysql(服务)</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">shutdown</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>重启mysql服务(shell)</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">service</span> mysqld restart 
</code></pre></div><!----></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/mosqu1t0/mosqu1t0.github.io/edit/master/docs/database/sql.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=DataBase" title="标签">#DataBase</a></div> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/76c729/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">DATABASE</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/76c729/" class="prev">DATABASE</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/poem.html"><div>
            
            <!----></div></a> <span class="date"></span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/cc7867/"><div>
            后端路线
            <!----></div></a> <span class="date">05-26</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/9a9f04/"><div>
            Websocket
            <!----></div></a> <span class="date">05-26</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>博客内容属于mosqu1t0所有</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><div></div></div></div>
    <script src="/assets/js/app.2b82a5e0.js" defer></script><script src="/assets/js/2.f4616c2c.js" defer></script><script src="/assets/js/19.fa086e74.js" defer></script>
  </body>
</html>
