<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web å¼€å‘ | ğŸ“–Mosquito&#39;s NoteğŸ“–</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="https://avatars.githubusercontent.com/u/94043894">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="ä¸ªäººç¬”è®°">
    
    <link rel="preload" href="/assets/css/0.styles.ff729ae9.css" as="style"><link rel="preload" href="/assets/js/app.6fb76f14.js" as="script"><link rel="preload" href="/assets/js/2.61776e55.js" as="script"><link rel="preload" href="/assets/js/70.3f4480f9.js" as="script"><link rel="prefetch" href="/assets/js/10.a473ff6c.js"><link rel="prefetch" href="/assets/js/100.ea2ec310.js"><link rel="prefetch" href="/assets/js/101.225ad059.js"><link rel="prefetch" href="/assets/js/102.bd130834.js"><link rel="prefetch" href="/assets/js/103.6a7b3708.js"><link rel="prefetch" href="/assets/js/104.38581912.js"><link rel="prefetch" href="/assets/js/105.29dab32a.js"><link rel="prefetch" href="/assets/js/106.1fc2ed0d.js"><link rel="prefetch" href="/assets/js/107.b169a4dc.js"><link rel="prefetch" href="/assets/js/108.838acd1e.js"><link rel="prefetch" href="/assets/js/109.5b1abefc.js"><link rel="prefetch" href="/assets/js/11.4984b590.js"><link rel="prefetch" href="/assets/js/110.7b2aa0ca.js"><link rel="prefetch" href="/assets/js/111.3999ac57.js"><link rel="prefetch" href="/assets/js/112.58cc55f6.js"><link rel="prefetch" href="/assets/js/113.2ede1528.js"><link rel="prefetch" href="/assets/js/114.0a3956aa.js"><link rel="prefetch" href="/assets/js/115.00b5aa5e.js"><link rel="prefetch" href="/assets/js/116.f2839cd9.js"><link rel="prefetch" href="/assets/js/117.ebf47383.js"><link rel="prefetch" href="/assets/js/118.05a20fe7.js"><link rel="prefetch" href="/assets/js/119.e3086d28.js"><link rel="prefetch" href="/assets/js/12.4a77fbd0.js"><link rel="prefetch" href="/assets/js/13.a50e7b37.js"><link rel="prefetch" href="/assets/js/14.f54c910b.js"><link rel="prefetch" href="/assets/js/15.0c0ae5ae.js"><link rel="prefetch" href="/assets/js/16.eca58129.js"><link rel="prefetch" href="/assets/js/17.751b4739.js"><link rel="prefetch" href="/assets/js/18.1d7e3489.js"><link rel="prefetch" href="/assets/js/19.adde455b.js"><link rel="prefetch" href="/assets/js/20.72ff9e8c.js"><link rel="prefetch" href="/assets/js/21.31801fba.js"><link rel="prefetch" href="/assets/js/22.f2819c95.js"><link rel="prefetch" href="/assets/js/23.1f1edf61.js"><link rel="prefetch" href="/assets/js/24.623a626f.js"><link rel="prefetch" href="/assets/js/25.73e031b9.js"><link rel="prefetch" href="/assets/js/26.0d42d4af.js"><link rel="prefetch" href="/assets/js/27.5c32778b.js"><link rel="prefetch" href="/assets/js/28.732f7b1f.js"><link rel="prefetch" href="/assets/js/29.b234041b.js"><link rel="prefetch" href="/assets/js/3.dc0c4c65.js"><link rel="prefetch" href="/assets/js/30.e1411499.js"><link rel="prefetch" href="/assets/js/31.11de95f4.js"><link rel="prefetch" href="/assets/js/32.74ced99b.js"><link rel="prefetch" href="/assets/js/33.ddd0d38c.js"><link rel="prefetch" href="/assets/js/34.d5cff1a6.js"><link rel="prefetch" href="/assets/js/35.f0813b4a.js"><link rel="prefetch" href="/assets/js/36.c89544c3.js"><link rel="prefetch" href="/assets/js/37.e5157499.js"><link rel="prefetch" href="/assets/js/38.56d785c2.js"><link rel="prefetch" href="/assets/js/39.1ba4c038.js"><link rel="prefetch" href="/assets/js/4.eb3ecdec.js"><link rel="prefetch" href="/assets/js/40.9fb1b8c2.js"><link rel="prefetch" href="/assets/js/41.5752bea9.js"><link rel="prefetch" href="/assets/js/42.8f7e8b6c.js"><link rel="prefetch" href="/assets/js/43.1b524583.js"><link rel="prefetch" href="/assets/js/44.9f8958cd.js"><link rel="prefetch" href="/assets/js/45.36a04dd0.js"><link rel="prefetch" href="/assets/js/46.ec2f2d23.js"><link rel="prefetch" href="/assets/js/47.47b5942f.js"><link rel="prefetch" href="/assets/js/48.88686493.js"><link rel="prefetch" href="/assets/js/49.4de8311d.js"><link rel="prefetch" href="/assets/js/5.2e15fdee.js"><link rel="prefetch" href="/assets/js/50.ec311fbc.js"><link rel="prefetch" href="/assets/js/51.3e9a2d1b.js"><link rel="prefetch" href="/assets/js/52.608c589f.js"><link rel="prefetch" href="/assets/js/53.3ad77b90.js"><link rel="prefetch" href="/assets/js/54.52786df1.js"><link rel="prefetch" href="/assets/js/55.fe03ea6e.js"><link rel="prefetch" href="/assets/js/56.518db7b4.js"><link rel="prefetch" href="/assets/js/57.38595c97.js"><link rel="prefetch" href="/assets/js/58.d1c28631.js"><link rel="prefetch" href="/assets/js/59.50f7da04.js"><link rel="prefetch" href="/assets/js/6.d0bfce25.js"><link rel="prefetch" href="/assets/js/60.0d6dc468.js"><link rel="prefetch" href="/assets/js/61.da4c12bf.js"><link rel="prefetch" href="/assets/js/62.32eb3eba.js"><link rel="prefetch" href="/assets/js/63.daf34c57.js"><link rel="prefetch" href="/assets/js/64.51b17ce9.js"><link rel="prefetch" href="/assets/js/65.8914918b.js"><link rel="prefetch" href="/assets/js/66.40a63f7a.js"><link rel="prefetch" href="/assets/js/67.ca93d2a0.js"><link rel="prefetch" href="/assets/js/68.b96cdc90.js"><link rel="prefetch" href="/assets/js/69.af1b13fd.js"><link rel="prefetch" href="/assets/js/7.0090b428.js"><link rel="prefetch" href="/assets/js/71.176ae50c.js"><link rel="prefetch" href="/assets/js/72.c4e86f0e.js"><link rel="prefetch" href="/assets/js/73.b853e792.js"><link rel="prefetch" href="/assets/js/74.1d4271a8.js"><link rel="prefetch" href="/assets/js/75.db7472ab.js"><link rel="prefetch" href="/assets/js/76.6223b5e8.js"><link rel="prefetch" href="/assets/js/77.46bcfa4e.js"><link rel="prefetch" href="/assets/js/78.24908198.js"><link rel="prefetch" href="/assets/js/79.e2e079a3.js"><link rel="prefetch" href="/assets/js/8.30a5daa8.js"><link rel="prefetch" href="/assets/js/80.02c585de.js"><link rel="prefetch" href="/assets/js/81.9e39025a.js"><link rel="prefetch" href="/assets/js/82.4b72e45d.js"><link rel="prefetch" href="/assets/js/83.a7e907e9.js"><link rel="prefetch" href="/assets/js/84.0f850cc9.js"><link rel="prefetch" href="/assets/js/85.71e3c904.js"><link rel="prefetch" href="/assets/js/86.263ade72.js"><link rel="prefetch" href="/assets/js/87.a1ca1787.js"><link rel="prefetch" href="/assets/js/88.8b4ed21c.js"><link rel="prefetch" href="/assets/js/89.6bdff0be.js"><link rel="prefetch" href="/assets/js/9.12c5a99f.js"><link rel="prefetch" href="/assets/js/90.359a9b7f.js"><link rel="prefetch" href="/assets/js/91.ca28e04b.js"><link rel="prefetch" href="/assets/js/92.08df75b4.js"><link rel="prefetch" href="/assets/js/93.56fe4f75.js"><link rel="prefetch" href="/assets/js/94.9cc6392b.js"><link rel="prefetch" href="/assets/js/95.38378f71.js"><link rel="prefetch" href="/assets/js/96.93de495b.js"><link rel="prefetch" href="/assets/js/97.db03d19d.js"><link rel="prefetch" href="/assets/js/98.9e8227c6.js"><link rel="prefetch" href="/assets/js/99.792cd029.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ff729ae9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ğŸ“–Mosquito's NoteğŸ“–</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
    ç®€ä»‹
  </a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
    ç®—æ³•
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web" class="mobile-dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/html/" class="nav-link">
    Html
  </a></li><li class="dropdown-item"><!----> <a href="/web/css/" class="nav-link">
    Css
  </a></li><li class="dropdown-item"><!----> <a href="/web/js/" class="nav-link">
    JavaScript
  </a></li><li class="dropdown-item"><!----> <a href="/web/java/" class="nav-link router-link-active">
    Java
  </a></li><li class="dropdown-item"><!----> <a href="/web/database/mysql/" class="nav-link">
    Mysql
  </a></li></ul></div></div><div class="nav-item"><a href="/cs/" class="nav-link">
    Cs
  </a></div><div class="nav-item"><a href="/others/" class="nav-link">
    å…¶ä»–
  </a></div> <a href="https://github.com/mosqu1t0/Note" target="_blank" rel="noopener noreferrer" class="repo-link">
      GitHub
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
    ç®€ä»‹
  </a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
    ç®—æ³•
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web" class="mobile-dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/html/" class="nav-link">
    Html
  </a></li><li class="dropdown-item"><!----> <a href="/web/css/" class="nav-link">
    Css
  </a></li><li class="dropdown-item"><!----> <a href="/web/js/" class="nav-link">
    JavaScript
  </a></li><li class="dropdown-item"><!----> <a href="/web/java/" class="nav-link router-link-active">
    Java
  </a></li><li class="dropdown-item"><!----> <a href="/web/database/mysql/" class="nav-link">
    Mysql
  </a></li></ul></div></div><div class="nav-item"><a href="/cs/" class="nav-link">
    Cs
  </a></div><div class="nav-item"><a href="/others/" class="nav-link">
    å…¶ä»–
  </a></div> <a href="https://github.com/mosqu1t0/Note" target="_blank" rel="noopener noreferrer" class="repo-link">
      GitHub
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaSE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaWeb</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MyBatis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>SpringBoot</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>åŸºç¡€å…¥é—¨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>æ ¸å¿ƒåŠŸèƒ½</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/01-é…ç½®æ–‡ä»¶.html" class="sidebar-link">é…ç½®æ–‡ä»¶</a></li><li><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.html" class="active sidebar-link">Web å¼€å‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.html#springmvc-è‡ªåŠ¨é…ç½®æ¦‚è§ˆ" class="sidebar-link">SpringMVC è‡ªåŠ¨é…ç½®æ¦‚è§ˆ</a></li><li class="sidebar-sub-header"><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.html#ç®€å•åŠŸèƒ½åˆ†æ" class="sidebar-link">ç®€å•åŠŸèƒ½åˆ†æ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.html#é™æ€èµ„æºè®¿é—®" class="sidebar-link">é™æ€èµ„æºè®¿é—®</a></li><li class="sidebar-sub-header"><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.html#æ¬¢è¿é¡µæ”¯æŒ" class="sidebar-link">æ¬¢è¿é¡µæ”¯æŒ</a></li><li class="sidebar-sub-header"><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.html#è‡ªå®šä¹‰-favicon" class="sidebar-link">è‡ªå®šä¹‰ Favicon</a></li><li class="sidebar-sub-header"><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.html#é™æ€èµ„æºé…ç½®åŸç†" class="sidebar-link">é™æ€èµ„æºé…ç½®åŸç†</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.html#è¯·æ±‚å‚æ•°å¤„ç†" class="sidebar-link">è¯·æ±‚å‚æ•°å¤„ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.html#è¯·æ±‚æ˜ å°„" class="sidebar-link">è¯·æ±‚æ˜ å°„</a></li><li class="sidebar-sub-header"><a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.html#æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£" class="sidebar-link">æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£</a></li></ul></li></ul></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="web-å¼€å‘"><a href="#web-å¼€å‘" class="header-anchor">#</a> Web å¼€å‘</h1> <ul><li>SpringMVC è‡ªåŠ¨é…ç½®æ¦‚è§ˆ</li> <li>ç®€å•åŠŸèƒ½åˆ†æ</li> <li>è¯·æ±‚å‚æ•°å¤„ç†</li> <li>æ•°æ®å“åº”ä¸å†…å®¹åå•†</li> <li>è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“</li> <li>æ‹¦æˆªå™¨</li> <li>å¼‚å¸¸å¤„ç†</li> <li>åŸç”Ÿ Servlet ç»„ä»¶ åµŒå…¥å¼ Web å®¹å™¨</li> <li>å®šåˆ¶åŒ–åŸç†</li></ul> <h2 id="springmvc-è‡ªåŠ¨é…ç½®æ¦‚è§ˆ"><a href="#springmvc-è‡ªåŠ¨é…ç½®æ¦‚è§ˆ" class="header-anchor">#</a> SpringMVC è‡ªåŠ¨é…ç½®æ¦‚è§ˆ</h2> <p>Spring Boot provides auto-configuration for Spring MVC that <strong>works well with most applications.ï¼ˆå¤§å¤šåœºæ™¯æˆ‘ä»¬éƒ½æ— éœ€è‡ªå®šä¹‰é…ç½®ï¼‰</strong></p> <p>The auto-configuration adds the following features on top of Springâ€™s defaults:</p> <ul><li><p>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver beans</code>.ï¼ˆå†…å®¹åå•†è§†å›¾è§£æå™¨å’Œ BeanName è§†å›¾è§£æå™¨ï¼‰</p></li> <li><p>Support for serving static resources, including support for WebJars (covered later in this document)).ï¼ˆé™æ€èµ„æºï¼ŒåŒ…æ‹¬ webjarsï¼‰</p></li> <li><p>utomatic registration of Converter, GenericConverter, and Formatter beans.</p> <ul><li>è‡ªåŠ¨æ³¨å†Œ Converterï¼ŒGenericConverterï¼ŒFormatter</li></ul></li> <li><p>Support for HttpMessageConverters (covered later in this document).</p> <ul><li>æ”¯æŒ HttpMessageConverters ï¼ˆé…åˆå†…å®¹åå•†ç†è§£åŸç†ï¼‰</li></ul></li> <li><p>Automatic registration of MessageCodesResolver (covered later in this document).</p> <ul><li>è‡ªåŠ¨æ³¨å†Œ MessageCodesResolver ï¼ˆå›½é™…åŒ–ç”¨ï¼‰</li></ul></li> <li><p>Static index.html support.</p> <ul><li>é™æ€ index.html é¡µæ”¯æŒ</li></ul></li> <li><p>Custom Favicon support (covered later in this document).</p> <ul><li>è‡ªå®šä¹‰ Favicon</li></ul></li> <li><p>Automatic use of a ConfigurableWebBindingInitializer bean (covered later in this document).</p> <ul><li>è‡ªåŠ¨ä½¿ç”¨ ConfigurableWebBindingInitializer ï¼Œï¼ˆDataBinder è´Ÿè´£å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ° JavaBean ä¸Šï¼‰</li></ul></li></ul> <blockquote><p>If you want to keep those Spring Boot MVC customizations and make more MVC customizations (interceptors, formatters, view controllers, and other features), you can add your own @Configuration class of type WebMvcConfigurer but without @EnableWebMvc.
<strong>ä¸ç”¨@EnableWebMvc æ³¨è§£ã€‚ä½¿ç”¨ @Configuration + WebMvcConfigurer è‡ªå®šä¹‰è§„åˆ™</strong></p></blockquote> <blockquote><p>If you want to provide custom instances of RequestMappingHandlerMapping, RequestMappingHandlerAdapter, or ExceptionHandlerExceptionResolver, and still keep the Spring Boot MVC customizations, you can declare a bean of type WebMvcRegistrations and use it to provide custom instances of those components.
<strong>å£°æ˜ WebMvcRegistrations æ”¹å˜é»˜è®¤åº•å±‚ç»„ä»¶</strong></p></blockquote> <blockquote><p>If you want to take complete control of Spring MVC, you can add your own @Configuration annotated with @EnableWebMvc, or alternatively add your own @Configuration-annotated DelegatingWebMvcConfiguration as described in the Javadoc of @EnableWebMvc.
<strong>ä½¿ç”¨ @EnableWebMvc+@Configuration+DelegatingWebMvcConfiguration å…¨é¢æ¥ç®¡ SpringMVC</strong></p></blockquote> <h2 id="ç®€å•åŠŸèƒ½åˆ†æ"><a href="#ç®€å•åŠŸèƒ½åˆ†æ" class="header-anchor">#</a> ç®€å•åŠŸèƒ½åˆ†æ</h2> <h3 id="é™æ€èµ„æºè®¿é—®"><a href="#é™æ€èµ„æºè®¿é—®" class="header-anchor">#</a> é™æ€èµ„æºè®¿é—®</h3> <h4 id="é™æ€èµ„æºç›®å½•"><a href="#é™æ€èµ„æºç›®å½•" class="header-anchor">#</a> é™æ€èµ„æºç›®å½•</h4> <p>åªè¦é™æ€èµ„æºæ”¾åœ¨ç±»è·¯å¾„ä¸‹ï¼š called <code>/static</code> (or <code>/public</code> or <code>/resources</code> or <code>/META-INF/resources</code>
è®¿é—® ï¼š å½“å‰é¡¹ç›®æ ¹è·¯å¾„<code>/</code> + é™æ€èµ„æºå</p> <p>åŸç†ï¼š é™æ€æ˜ å°„<code>/**</code>ã€‚
è¯·æ±‚è¿›æ¥ï¼Œå…ˆå»æ‰¾ Controller çœ‹èƒ½ä¸èƒ½å¤„ç†ã€‚ä¸èƒ½å¤„ç†çš„æ‰€æœ‰è¯·æ±‚åˆéƒ½äº¤ç»™é™æ€èµ„æºå¤„ç†å™¨ã€‚é™æ€èµ„æºä¹Ÿæ‰¾ä¸åˆ°åˆ™å“åº” 404 é¡µé¢</p> <p>æ”¹å˜é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /res/<span class="token important">**</span>    <span class="token comment"># é™æ€èµ„æºçš„è®¿é—®å‰ç¼€</span>

  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span>/haha/<span class="token punctuation">]</span>
</code></pre></div><h4 id="é™æ€èµ„æºçš„è®¿é—®å‰ç¼€"><a href="#é™æ€èµ„æºçš„è®¿é—®å‰ç¼€" class="header-anchor">#</a> é™æ€èµ„æºçš„è®¿é—®å‰ç¼€</h4> <ul><li><p>é»˜è®¤æ— å‰ç¼€</p></li> <li><p>è‡ªå®šä¹‰å‰ç¼€</p></li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /res/<span class="token important">**</span>
</code></pre></div><p>å½“å‰é¡¹ç›® + static-path-pattern + é™æ€èµ„æºå = é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾</p> <h4 id="webjar"><a href="#webjar" class="header-anchor">#</a> webjar</h4> <blockquote><p>è‡ªåŠ¨æ˜ å°„ <code>/webjars/**</code></p></blockquote> <p><a href="https://www.webjars.org/" target="_blank" rel="noopener noreferrer"> https://www.webjars.org/ <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.webjars<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jquery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>è®¿é—®åœ°å€ï¼š</strong>http://localhost:8080/webjars/jquery/3.5.1/jquery.js</p> <blockquote><p>åé¢åœ°å€è¦æŒ‰ç…§ä¾èµ–é‡Œé¢çš„åŒ…è·¯å¾„</p></blockquote> <h3 id="æ¬¢è¿é¡µæ”¯æŒ"><a href="#æ¬¢è¿é¡µæ”¯æŒ" class="header-anchor">#</a> æ¬¢è¿é¡µæ”¯æŒ</h3> <ul><li>é™æ€èµ„æºè·¯å¾„ä¸‹  index.html
<ul><li>å¯ä»¥é…ç½®é™æ€èµ„æºè·¯å¾„</li> <li>ä½†æ˜¯ä¸å¯ä»¥é…ç½®é™æ€èµ„æºçš„è®¿é—®å‰ç¼€ã€‚å¦åˆ™å¯¼è‡´ index.html ä¸èƒ½è¢«é»˜è®¤è®¿é—®</li></ul></li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token comment">#  mvc:</span>
<span class="token comment">#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´ welcome page åŠŸèƒ½å¤±æ•ˆ</span>

  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span>/haha/<span class="token punctuation">]</span>
</code></pre></div><ul><li>controller èƒ½å¤„ç†<code>/index</code></li></ul> <h3 id="è‡ªå®šä¹‰-favicon"><a href="#è‡ªå®šä¹‰-favicon" class="header-anchor">#</a> è‡ªå®šä¹‰ Favicon</h3> <p>favicon.ico æ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹å³å¯ã€‚</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token comment">#  mvc:</span>
<span class="token comment">#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´ Favicon åŠŸèƒ½å¤±æ•ˆ</span>
</code></pre></div><h3 id="é™æ€èµ„æºé…ç½®åŸç†"><a href="#é™æ€èµ„æºé…ç½®åŸç†" class="header-anchor">#</a> é™æ€èµ„æºé…ç½®åŸç†</h3> <ul><li>SpringBoot å¯åŠ¨é»˜è®¤åŠ è½½  <code>xxxAutoConfiguration</code> ç±»ï¼ˆè‡ªåŠ¨é…ç½®ç±»ï¼‰</li> <li>SpringMVC åŠŸèƒ½çš„è‡ªåŠ¨é…ç½®ç±» <code>WebMvcAutoConfiguration</code>ï¼Œç”Ÿæ•ˆ</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>SERVLET<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">WebMvcConfigurationSupport</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span>HIGHEST_PRECEDENCE <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">DispatcherServletAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">TaskExecutionAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
		<span class="token class-name">ValidationAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfiguration</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>ç»™å®¹å™¨ä¸­é…äº†ä»€ä¹ˆ</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">EnableWebMvcConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">WebMvcProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">ResourceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfigurationAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>é…ç½®æ–‡ä»¶çš„ç›¸å…³å±æ€§å’Œ xxx è¿›è¡Œäº†ç»‘å®šã€‚<code>WebMvcProperties==spring.mvc</code>ã€<code>ResourceProperties==spring.resources</code>ï¼ˆA==B, è¡¨ç¤º A ä¸ B ç»‘å®šï¼‰</li></ul> <h4 id="é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨"><a href="#é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨" class="header-anchor">#</a> é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æœ‰å‚æ„é€ å™¨æ‰€æœ‰å‚æ•°çš„å€¼éƒ½ä¼šä»å®¹å™¨ä¸­ç¡®å®š</span>
<span class="token comment">//ResourceProperties resourcePropertiesï¼›è·å–å’Œ spring.resources ç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡</span>
<span class="token comment">//WebMvcProperties mvcProperties è·å–å’Œ spring.mvc ç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡</span>
<span class="token comment">//ListableBeanFactory beanFactory Spring çš„ beanFactory</span>
<span class="token comment">//HttpMessageConverters æ‰¾åˆ°æ‰€æœ‰çš„ HttpMessageConverters</span>
<span class="token comment">//ResourceHandlerRegistrationCustomizer æ‰¾åˆ° èµ„æºå¤„ç†å™¨çš„è‡ªå®šä¹‰å™¨ã€‚=========</span>
<span class="token comment">//DispatcherServletPath</span>
<span class="token comment">//ServletRegistrationBean   ç»™åº”ç”¨æ³¨å†Œ Servletã€Filter....</span>
	<span class="token keyword">public</span> <span class="token class-name">WebMvcAutoConfigurationAdapter</span><span class="token punctuation">(</span><span class="token class-name">ResourceProperties</span> resourceProperties<span class="token punctuation">,</span> <span class="token class-name">WebMvcProperties</span> mvcProperties<span class="token punctuation">,</span>
				<span class="token class-name">ListableBeanFactory</span> beanFactory<span class="token punctuation">,</span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HttpMessageConverters</span><span class="token punctuation">&gt;</span></span> messageConvertersProvider<span class="token punctuation">,</span>
				<span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResourceHandlerRegistrationCustomizer</span><span class="token punctuation">&gt;</span></span> resourceHandlerRegistrationCustomizerProvider<span class="token punctuation">,</span>
				<span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DispatcherServletPath</span><span class="token punctuation">&gt;</span></span> dispatcherServletPath<span class="token punctuation">,</span>
				<span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> servletRegistrations<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties <span class="token operator">=</span> resourceProperties<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties <span class="token operator">=</span> mvcProperties<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory <span class="token operator">=</span> beanFactory<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>messageConvertersProvider <span class="token operator">=</span> messageConvertersProvider<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>resourceHandlerRegistrationCustomizer <span class="token operator">=</span> resourceHandlerRegistrationCustomizerProvider<span class="token punctuation">.</span><span class="token function">getIfAvailable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>dispatcherServletPath <span class="token operator">=</span> dispatcherServletPath<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>servletRegistrations <span class="token operator">=</span> servletRegistrations<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
</code></pre></div><h4 id="èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™"><a href="#èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™" class="header-anchor">#</a> èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">isAddMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Default resource handling disabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Duration</span> cachePeriod <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPeriod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">CacheControl</span> cacheControl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCachecontrol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHttpCacheControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//webjars çš„è§„åˆ™</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>registry<span class="token punctuation">.</span><span class="token function">hasMappingForPattern</span><span class="token punctuation">(</span><span class="token string">&quot;/webjars/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">customizeResourceHandlerRegistration</span><span class="token punctuation">(</span>registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/webjars/**&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:/META-INF/resources/webjars/&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setCachePeriod</span><span class="token punctuation">(</span><span class="token function">getSeconds</span><span class="token punctuation">(</span>cachePeriod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span>cacheControl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//</span>
    <span class="token class-name">String</span> staticPathPattern <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>registry<span class="token punctuation">.</span><span class="token function">hasMappingForPattern</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">customizeResourceHandlerRegistration</span><span class="token punctuation">(</span>registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token function">getResourceLocations</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setCachePeriod</span><span class="token punctuation">(</span><span class="token function">getSeconds</span><span class="token punctuation">(</span>cachePeriod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span>cacheControl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token comment">#  mvc:</span>
<span class="token comment">#    static-path-pattern: /res/**</span>

  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">add-mappings</span><span class="token punctuation">:</span> false   ç¦ç”¨æ‰€æœ‰é™æ€èµ„æºè§„åˆ™
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//getStaticLocations()</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.resources&quot;</span><span class="token punctuation">,</span> ignoreUnknownFields <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceProperties</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> CLASSPATH_RESOURCE_LOCATIONS <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;classpath:/META-INF/resources/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;classpath:/resources/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;classpath:/static/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;classpath:/public/&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * Locations of static resources. Defaults to classpath:[/META-INF/resources/,
	 * /resources/, /static/, /public/].
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> staticLocations <span class="token operator">=</span> CLASSPATH_RESOURCE_LOCATIONS<span class="token punctuation">;</span>
</code></pre></div><h4 id="æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™"><a href="#æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™" class="header-anchor">#</a> æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">HandlerMapping</span>ï¼šå¤„ç†å™¨æ˜ å°„ã€‚ä¿å­˜äº†æ¯ä¸€ä¸ª <span class="token class-name">Handler</span> èƒ½å¤„ç†å“ªäº›è¯·æ±‚ã€‚ <span class="token operator">--</span><span class="token operator">&gt;</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">WelcomePageHandlerMapping</span> <span class="token function">welcomePageHandlerMapping</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span>
        <span class="token class-name">FormattingConversionService</span> mvcConversionService<span class="token punctuation">,</span> <span class="token class-name">ResourceUrlProvider</span> mvcResourceUrlProvider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">WelcomePageHandlerMapping</span> welcomePageHandlerMapping <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WelcomePageHandlerMapping</span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token class-name">TemplateAvailabilityProviders</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">,</span> applicationContext<span class="token punctuation">,</span> <span class="token function">getWelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setInterceptors</span><span class="token punctuation">(</span><span class="token function">getInterceptors</span><span class="token punctuation">(</span>mvcConversionService<span class="token punctuation">,</span> mvcResourceUrlProvider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setCorsConfigurations</span><span class="token punctuation">(</span><span class="token function">getCorsConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> welcomePageHandlerMapping<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">WelcomePageHandlerMapping</span><span class="token punctuation">(</span><span class="token class-name">TemplateAvailabilityProviders</span> templateAvailabilityProviders<span class="token punctuation">,</span>
    <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">&gt;</span></span> welcomePage<span class="token punctuation">,</span> <span class="token class-name">String</span> staticPathPattern<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>welcomePage<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;/**&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//è¦ç”¨æ¬¢è¿é¡µåŠŸèƒ½ï¼Œå¿…é¡»æ˜¯/**</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Adding welcome page: &quot;</span> <span class="token operator">+</span> welcomePage<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setRootViewName</span><span class="token punctuation">(</span><span class="token string">&quot;forward:index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">welcomeTemplateExists</span><span class="token punctuation">(</span>templateAvailabilityProviders<span class="token punctuation">,</span> applicationContext<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è°ƒç”¨ Controller  /index</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Adding welcome page template: index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setRootViewName</span><span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="favicon"><a href="#favicon" class="header-anchor">#</a> favicon</h4> <p>æµè§ˆå™¨ä¼šå‘é€<code>/favicon.ico</code> è¯·æ±‚è·å–åˆ°å›¾æ ‡ï¼Œæ•´ä¸ª session æœŸé—´ä¸å†è·å–</p> <h2 id="è¯·æ±‚å‚æ•°å¤„ç†"><a href="#è¯·æ±‚å‚æ•°å¤„ç†" class="header-anchor">#</a> è¯·æ±‚å‚æ•°å¤„ç†</h2> <h3 id="è¯·æ±‚æ˜ å°„"><a href="#è¯·æ±‚æ˜ å°„" class="header-anchor">#</a> è¯·æ±‚æ˜ å°„</h3> <h4 id="rest-ä½¿ç”¨ä¸åŸç†"><a href="#rest-ä½¿ç”¨ä¸åŸç†" class="header-anchor">#</a> rest ä½¿ç”¨ä¸åŸç†</h4> <ul><li><p><code>@xxxMapping</code></p></li> <li><p>Rest é£æ ¼æ”¯æŒï¼ˆä½¿ç”¨ HTTP è¯·æ±‚æ–¹å¼åŠ¨è¯æ¥è¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œï¼‰</p> <ul><li><p>ä»¥å‰ï¼š<code>/getUser</code>   è·å–ç”¨æˆ·     <code>/deleteUser</code> åˆ é™¤ç”¨æˆ·    <code>/editUser</code>  ä¿®æ”¹ç”¨æˆ·       <code>/saveUser</code> ä¿å­˜ç”¨æˆ·</p></li> <li><p>ç°åœ¨ï¼š <code>/user</code>    GET-è·å–ç”¨æˆ·    DELETE-åˆ é™¤ç”¨æˆ·     PUT-ä¿®æ”¹ç”¨æˆ·      POST-ä¿å­˜ç”¨æˆ·</p></li> <li><p>æ ¸å¿ƒ <code>Filterï¼›HiddenHttpMethodFilter</code></p> <ul><li><p>ç”¨æ³•ï¼š è¡¨å• <code>method=post</code>ï¼Œéšè—åŸŸ <code>_method=put</code></p></li> <li><p>SpringBoot ä¸­æ‰‹åŠ¨å¼€å¯</p></li></ul></li> <li><p>æ‰©å±•ï¼šå¦‚ä½•æŠŠ<code>_method</code> è¿™ä¸ªåå­—æ¢æˆæˆ‘ä»¬è‡ªå·±å–œæ¬¢çš„ã€‚</p></li></ul></li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># æ‰‹åŠ¨å¼€å¯</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">hiddenmethod</span><span class="token punctuation">:</span>
      <span class="token key atrule">filter</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token comment">#å¼€å¯é¡µé¢è¡¨å•çš„ Rest åŠŸèƒ½</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.mvc.hiddenmethod.filter&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">//è¡¨ç¤ºéœ€è¦æ‰‹åŠ¨å¼€å¯</span>
<span class="token keyword">public</span> <span class="token class-name">OrderedHiddenHttpMethodFilter</span> <span class="token function">hiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OrderedHiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//è‡ªå®šä¹‰ filterï¼ˆåœ¨ config ç±»é‡Œï¼‰</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">HiddenHttpMethodFilter</span> <span class="token function">hiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">HiddenHttpMethodFilter</span> methodFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    methodFilter<span class="token punctuation">.</span><span class="token function">setMethodParam</span><span class="token punctuation">(</span><span class="token string">&quot;_m&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> methodFilter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Rest åŸç†ï¼ˆè¡¨å•æäº¤è¦ä½¿ç”¨ REST çš„æ—¶å€™ï¼‰</p> <ul><li>è¡¨å•æäº¤ä¼šå¸¦ä¸Š_method=PUT</li> <li><strong>è¯·æ±‚è¿‡æ¥</strong>è¢« HiddenHttpMethodFilter æ‹¦æˆª
<ul><li>è¯·æ±‚æ˜¯å¦æ­£å¸¸ï¼Œå¹¶ä¸”æ˜¯ POST
<ul><li>è·å–åˆ°<strong>_method</strong> çš„å€¼ã€‚</li> <li>å…¼å®¹ä»¥ä¸‹è¯·æ±‚ï¼›<code>PUT.DELETE.PATCH</code></li> <li><code>åŸç”Ÿ requestï¼ˆpostï¼‰</code>ï¼ŒåŒ…è£…æ¨¡å¼ <code>requesWrapper</code> é‡å†™äº† <code>getMethod</code> æ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¼ å…¥çš„å€¼ã€‚</li> <li>è¿‡æ»¤å™¨é“¾æ”¾è¡Œçš„æ—¶å€™ç”¨ wrapperã€‚ä»¥åçš„æ–¹æ³•è°ƒç”¨ getMethod æ˜¯è°ƒç”¨ requesWrapper çš„ã€‚</li></ul></li></ul></li></ul> <p><strong>Rest ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·</strong></p> <ul><li>å¦‚ PostMan ç›´æ¥å‘é€ Putã€delete ç­‰æ–¹å¼è¯·æ±‚ï¼Œæ— éœ€ Filterã€‚</li></ul> <h4 id="è¯·æ±‚æ˜ å°„åŸç†"><a href="#è¯·æ±‚æ˜ å°„åŸç†" class="header-anchor">#</a> è¯·æ±‚æ˜ å°„åŸç†</h4> <p>SpringMVC åŠŸèƒ½åˆ†æéƒ½ä» <code>org.springframework.web.servlet.DispatcherServlet --&gt; doDispatchï¼ˆï¼‰</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doDispatch</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">HttpServletRequest</span> processedRequest <span class="token operator">=</span> request<span class="token punctuation">;</span>
		<span class="token class-name">HandlerExecutionChain</span> mappedHandler <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">boolean</span> multipartRequestParsed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

		<span class="token class-name">WebAsyncManager</span> asyncManager <span class="token operator">=</span> <span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">getAsyncManager</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token class-name">Exception</span> dispatchException <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				processedRequest <span class="token operator">=</span> <span class="token function">checkMultipart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
				multipartRequestParsed <span class="token operator">=</span> <span class="token punctuation">(</span>processedRequest <span class="token operator">!=</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// æ‰¾åˆ°å½“å‰è¯·æ±‚ä½¿ç”¨å“ªä¸ª Handlerï¼ˆController çš„æ–¹æ³•ï¼‰å¤„ç†</span>
				mappedHandler <span class="token operator">=</span> <span class="token function">getHandler</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">//HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„ã€‚/xxx-&gt;&gt;xxxx</span>
</code></pre></div><p><img src="https://user-images.githubusercontent.com/94043894/178504385-f7d963ad-1d40-4063-8916-fdc6c49eaf0a.png" alt="image"></p> <p><strong>RequestMappingHandlerMapping</strong>ï¼šä¿å­˜äº†æ‰€æœ‰@RequestMapping å’Œ handler çš„æ˜ å°„è§„åˆ™ã€‚</p> <p><img src="https://user-images.githubusercontent.com/94043894/178505250-a4d48a3e-e7c1-40cd-8988-0c9a2fdec35e.png" alt="image"></p> <p>æ‰€æœ‰çš„è¯·æ±‚æ˜ å°„éƒ½åœ¨ HandlerMapping ä¸­ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">HandlerExecutionChain</span> <span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMapping</span> mapping <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">HandlerExecutionChain</span> handler <span class="token operator">=</span> mapping<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> handler<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>SpringBoot è‡ªåŠ¨é…ç½®æ¬¢è¿é¡µçš„ WelcomePageHandlerMapping ã€‚è®¿é—® /èƒ½è®¿é—®åˆ° index.htmlï¼›</li> <li>SpringBoot è‡ªåŠ¨é…ç½®äº†é»˜è®¤ çš„ RequestMappingHandlerMapping</li> <li>è¯·æ±‚è¿›æ¥ï¼ŒæŒ¨ä¸ªå°è¯•æ‰€æœ‰çš„ HandlerMapping çœ‹æ˜¯å¦æœ‰è¯·æ±‚ä¿¡æ¯ã€‚
<ul><li>å¦‚æœæœ‰å°±æ‰¾åˆ°è¿™ä¸ªè¯·æ±‚å¯¹åº”çš„ handler</li> <li>å¦‚æœæ²¡æœ‰å°±æ˜¯ä¸‹ä¸€ä¸ª HandlerMapping</li></ul></li> <li>æˆ‘ä»¬éœ€è¦ä¸€äº›è‡ªå®šä¹‰çš„æ˜ å°„å¤„ç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­æ”¾ <strong>HandlerMapping</strong>ã€‚è‡ªå®šä¹‰ <strong>HandlerMapping</strong></li></ul> <h3 id="æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£"><a href="#æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£" class="header-anchor">#</a> æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£</h3> <h4 id="æ³¨è§£"><a href="#æ³¨è§£" class="header-anchor">#</a> æ³¨è§£</h4> <h4 id="servelet-api"><a href="#servelet-api" class="header-anchor">#</a> Servelet API</h4> <h4 id="å¤æ‚å‚æ•°"><a href="#å¤æ‚å‚æ•°" class="header-anchor">#</a> å¤æ‚å‚æ•°</h4></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/mosqu1t0/Note/edit/master/docs/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/02-webå¼€å‘.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘âœğŸ»ï¸</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°âŒšï¸:</span> <span class="time">a few seconds ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/web/java/springboot/æ ¸å¿ƒåŠŸèƒ½/01-é…ç½®æ–‡ä»¶.html" class="prev">
          é…ç½®æ–‡ä»¶
        </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.6fb76f14.js" defer></script><script src="/assets/js/2.61776e55.js" defer></script><script src="/assets/js/70.3f4480f9.js" defer></script>
  </body>
</html>
